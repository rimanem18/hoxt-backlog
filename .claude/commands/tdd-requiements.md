---
description: TDD開発の要件整理をサブエージェントに依頼する。メインエージェントでは実施しない。
---

## 実行内容

1. @agent-symbol-searcher で機能関連情報を検索し、見つかったファイルをリスト化
   - 読み込んだ技術スタック定義に基づいて関連ファイルを検索
   - 関連する既存機能・コンポーネントを検索し、該当ファイルをReadツールで読み込み
   - 類似した実装パターンやアーキテクチャを特定し、設計文書をReadツールで読み込み
   - 既存のインターフェースやAPI仕様を確認し、関連ファイルをReadツールで読み込み

2. サブエージェントのレスポンスを待つ間、並列で以下の作業をおこなう
  - 指定された TASK 番号の実施範囲を特定し、次のサブエージェントが混乱しないように、タスクの実施範囲を明確化
    - フロントエンドか、バックエンドか、API のつなぎこみは必要か
  - `.claude/skills/common/references/*.md` を List して用意されているガイドラインを把握

3. 直列で TDD 要件定義を @agent-tdd-requirement-analyst に依頼
  - 最小限の関連情報、機能名、タスク番号とタスク情報をサブエージェントに渡す

### Analyst への入力例

最小限にしてサブエージェントに任せる:

例1

```md
今回 TDD 要件整理するのはフロントエンドのタスクでバックエンドは考慮不要です。
ドキュメント作成ガイドラインと、フロントエンド開発ガイドラインを参照してください。

## 関連情報

- 機能名: カスタムフック（useFoo,useFooMutation）
- 要件名: hoge-fuga
- タスク番号: TASK-XXXX（`docs/tasks/{要件名}-phase*.md Line:[XXX-XXX]`）
- {絞り込まれた関連ファイル名の列挙}
```

例2

```md
今回 TDD 要件整理するのは API のつなぎこみタスクです。 OpenAPI の理解が必要です。
ドキュメント作成ガイドラインと、バックエンド開発ガイドラインとフロントエンド開発ガイドラインを参照してください。

## 関連情報

- 機能名: API Client 設定
- 要件名: hoge-fuga
- タスク番号: TASK-XXXX（`docs/tasks/{要件名}-phase*.md Line:[XXX-XXX]`）
- {絞り込まれた関連ファイル名の列挙}
```

例3

```md
今回 TDD 要件整理するのは バックエンドのタスクです。 フロントエンドの考慮は不要です。
ドキュメント作成ガイドラインと、バックエンド開発ガイドラインを参照してください。

## 関連情報

- 機能名: Domain 層 UserEntity 実装
- 要件名: hoge-fuga
- タスク番号: TASK-XXXX（`docs/tasks/{要件名}-phase*.md Line:[XXX-XXX]`）
- {絞り込まれた関連ファイル名の列挙}
```

**必須**: Analyst とは極めて最小限のサマリーとファイル名のみでやりとりする
**非推奨**: 実装ファイルを Read ツールで読み込む
**禁止**: 詳細なサマリーをサブエージェントに入力する
**禁止**: ガイドラインを Read ツールで読み込む
  - どのガイドラインが存在するかを把握すれば OK
**禁止**: サブエージェントを並列で起動
  - サブエージェント→関連ファイルの絞り込み→サブエージェントの受け渡しをおこなう
