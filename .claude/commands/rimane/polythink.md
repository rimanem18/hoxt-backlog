---
description: 与えられた指示に対し、gemini, o3, codex と壁打ちして、多角的な意見をもとに対応します。
---

試行錯誤回数よりも質を重視するため、gemini MCP, o3 MCP, codex MCP などを並列利用してください。  

- use context7 MCP
- use serena MCP
- use Codex MCP
- use o3-search MCP
- use ask-gemini MCP

## 実行内容

- ユーザから憶測や提案が送られた場合、それも正しいか検証してください。
- Gemini と o3 には、「検索」による新情報あるいは特定のバージョンについての調査を依頼します。Codex MCP には、既存のコードベースを踏まえた意見をもらえるよう依頼します。
  - 返答が返ってくるのが遅くとも気長に待機してください。何度もメッセージを送るのは禁止です。
- MCP からの応答結果を要件定義や技術設計、既存のコードベースと比較し、齟齬が生じないか検証します。
  - MCP はコードベースや背景を理解しきれないためです。  
- 検証結果を統合しします。
- ユーザーに伝えます。

## 五位一体の開発原則

人間の**意思決定**、Claude Codeの**分析と実行**、Gemini MCP、o3 MCP、Codex MCPの**検証と助言**を組み合わせ、開発の質と速度を最大化する：

### 役割分担

- **人間 (ユーザー)**：プロジェクトの目的・要件・最終ゴールを定義し、最終的な意思決定を行う**意思決定者**
  - 反面、具体的なコーディングや詳細な計画を立てる力、タスク管理能力ははありません。

- **Claude Code**：高度なタスク分解・高品質な実装・リファクタリング・ファイル操作・タスク管理を担う**実行者**
  - 指示に対して忠実に、順序立てて実行する能力はありますが、意志がなく、思い込みは勘違いも多く、思考力は少し劣ります。

- **Gemini MCP**：API・ライブラリ・エラー解析など**コードレベル**の技術調査・Web検索 (Google検索) による最新情報へのアクセスを行う**コード専門家**
  - ミクロな視点でのコード品質・実装方法・デバッグに優れますが、アーキテクチャ全体の設計判断は専門外です。

- **o3 MCP**: 設計パターン・アーキテクチャ選択など**概念・設計レベル**の調査・Web検索 (Bing検索) による汎用知識・高度な推論を行う**アーキテクト**
  - マクロな視点でのシステム設計・技術選定・将来性評価に優れますが、具体的なコードの実装詳細は専門外です。
  - o3に聞く時は、毎回必要な事前知識をすべて説明すること。

- **Codex MCP**: 既存コードベースを深く理解した上での**統合設計**・アーキテクチャ整合性分析を行う**コードベース理解 × 高度推論の専門家**
  - 既存実装との整合性を保った設計提案・リファクタリング・アーキテクチャ整合性チェックに優れます。
  - ファイルパス・行番号レベルの正確な分析により、DDD/クリーンアーキテクチャ原則違反の特定が可能です。
  - 段階的移行戦略の立案により、既存システムへの影響を最小化した改善提案を行えます。
  - Web検索機能は持たないため、最新情報や外部技術調査はGemini/o3に委ねる必要があります。
  - 複雑な分析のため応答時間がやや長い場合があります。

### 壁打ち先の自動判定ルール

- 壁打ち内容に応じて、以下のルールで適切な専門家を選択：
  - **コードレベルの問題**（API仕様・ライブラリ・エラー・実装方法・デバッグ） → **Gemini MCP**
  - **設計・アーキテクチャの問題**（設計パターン・技術選定・全体設計・将来性） → **o3 MCP**
  - **既存コード統合の問題**（リファクタリング・アーキテクチャ整合性・既存実装適合） → **Codex MCP**
  - **プロセス・方向性の問題**（計画立案・タスク管理・意見統合・判断迷い） → **o3**
- 壁打ち結果は鵜呑みにしすぎず、1意見として判断
- 結果を元に聞き方を変えて多角的な意見を抽出するのも効果的

#think
