/**
 * ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ç”¨ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°é›†
 *
 * ã€æ©Ÿèƒ½æ¦‚è¦ã€‘: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®çµ±ä¸€åŒ–ã¨ã‚¨ãƒ©ãƒ¼ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å‹å®‰å…¨ãªå‡¦ç†
 * ã€DRYåŸå‰‡é©ç”¨ã€‘: é‡è¤‡ã—ã¦ã„ãŸerror instanceof Erroråˆ¤å®šã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆã‚’å…±é€šåŒ–
 * ã€æ”¹å–„å†…å®¹ã€‘: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã§æ•£åœ¨ã—ã¦ã„ãŸã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’çµ±ä¸€
 *
 * ğŸŸ¢ Refactorãƒ•ã‚§ãƒ¼ã‚ºã§ã®é‡è¤‡ã‚³ãƒ¼ãƒ‰å‰Šæ¸› - è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã§é‡è¤‡ã—ã¦ã„ãŸå®Ÿè£…ã‚’å…±é€šåŒ–
 */

/**
 * ã‚¨ãƒ©ãƒ¼ã‹ã‚‰å®‰å…¨ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—ã™ã‚‹
 *
 * ã€æ©Ÿèƒ½æ¦‚è¦ã€‘: Error ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã©ã†ã‹ã‚’åˆ¤å®šã—ã€å®‰å…¨ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æŠ½å‡º
 * ã€å‹å®‰å…¨æ€§ã€‘: unknown å‹ã®ã‚¨ãƒ©ãƒ¼ã«å¯¾ã—ã¦ã‚‚å®‰å…¨ã«å‡¦ç†
 * ã€çµ±ä¸€æ€§ã€‘: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã§ä¸€è²«ã—ãŸã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼ã‚’ä¿è¨¼
 *
 * @param error - ã‚¨ãƒ©ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆunknownå‹ã‚‚å—ã‘ä»˜ã‘ã‚‹ï¼‰
 * @returns å®‰å…¨ã«æŠ½å‡ºã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
 */
export const getErrorMessage = (error: unknown): string => {
  // ã€å‹åˆ¤å®šã€‘: Error ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã©ã†ã‹ã‚’åˆ¤å®š
  if (error instanceof Error) {
    // ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—ã€‘: Error ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—
    return error.message;
  }

  // ã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ã€‘: Error ã§ãªã„å ´åˆã¯æ–‡å­—åˆ—å¤‰æ›
  // ã€å®‰å…¨æ€§ç¢ºä¿ã€‘: null/undefined ã§ã‚‚å®‰å…¨ã«æ–‡å­—åˆ—åŒ–
  if (error === null || error === undefined) {
    return 'Unknown error';
  }

  // ã€å‹å¤‰æ›ã€‘: ãã®ä»–ã®å‹ã¯ String() ã§å®‰å…¨ã«æ–‡å­—åˆ—åŒ–
  return String(error);
};

/**
 * ä¾å­˜é–¢ä¿‚ã® null ãƒã‚§ãƒƒã‚¯ç”¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆã™ã‚‹
 *
 * ã€æ©Ÿèƒ½æ¦‚è¦ã€‘: ä¾å­˜æ€§æ³¨å…¥æ™‚ã® null ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’çµ±ä¸€
 * ã€DRYåŸå‰‡é©ç”¨ã€‘: AuthenticateUserUseCase ã§é‡è¤‡ã—ã¦ã„ãŸä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯ã‚’å…±é€šåŒ–
 * ã€ä¸€è²«æ€§ç¢ºä¿ã€‘: å…¨ã¦ã® UseCase ã§çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
 *
 * @param dependencyName - ä¾å­˜é–¢ä¿‚ã®åå‰
 * @returns çµ±ä¸€ã•ã‚ŒãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
 */
export const createDependencyNullError = (dependencyName: string): string => {
  // ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆçµ±ä¸€ã€‘: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã§çµ±ä¸€ã•ã‚ŒãŸä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  return `Required dependency ${dependencyName} is null`;
};

/**
 * ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆã™ã‚‹
 *
 * ã€æ©Ÿèƒ½æ¦‚è¦ã€‘: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–¢é€£ã‚¨ãƒ©ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’çµ±ä¸€åŒ–
 * ã€DRYåŸå‰‡é©ç”¨ã€‘: PostgreSQLUserRepository ã‚„ connection.ts ã§é‡è¤‡ã—ã¦ã„ãŸå®Ÿè£…ã‚’å…±é€šåŒ–
 * ã€ä¸€è²«æ€§ç¢ºä¿ã€‘: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’çµ±ä¸€
 *
 * @param context - ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆä¾‹ï¼šã€Œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã€ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ä¿å­˜ã€ï¼‰
 * @param originalError - å…ƒã®ã‚¨ãƒ©ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
 * @returns çµ±ä¸€ã•ã‚ŒãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
 */
export const createDatabaseErrorMessage = (
  context: string,
  originalError: unknown,
): string => {
  // ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ§‹æˆã€‘: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ + å…ƒã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®çµ„ã¿åˆã‚ã›
  const errorMessage = getErrorMessage(originalError);
  return `${context}ã«å¤±æ•—ã—ã¾ã—ãŸ: ${errorMessage}`;
};

/**
 * å…¥åŠ›å€¤æ¤œè¨¼ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆã™ã‚‹
 *
 * ã€æ©Ÿèƒ½æ¦‚è¦ã€‘: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’çµ±ä¸€åŒ–
 * ã€DRYåŸå‰‡é©ç”¨ã€‘: CreateUserInput ã‚„ UpdateUserInput ã§é‡è¤‡ã—ã¦ã„ãŸå®Ÿè£…ã‚’å…±é€šåŒ–
 * ã€ä¸€è²«æ€§ç¢ºä¿ã€‘: å…¥åŠ›å€¤æ¤œè¨¼ã‚¨ãƒ©ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’çµ±ä¸€
 *
 * @param errors - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é…åˆ—
 * @returns çµ±ä¸€ã•ã‚ŒãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æ¤œè¨¼ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
 */
export const createValidationErrorMessage = (errors: string[]): string => {
  // ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆçµ±ä¸€ã€‘: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã§çµ±ä¸€ã•ã‚ŒãŸæ¤œè¨¼ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  return `å…¥åŠ›å€¤æ¤œè¨¼ã‚¨ãƒ©ãƒ¼: ${errors.join(', ')}`;
};

/**
 * ç’°å¢ƒå¤‰æ•°è¨­å®šã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆã™ã‚‹
 *
 * ã€æ©Ÿèƒ½æ¦‚è¦ã€‘: ç’°å¢ƒå¤‰æ•°é–¢é€£ã‚¨ãƒ©ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’çµ±ä¸€åŒ–
 * ã€DRYåŸå‰‡é©ç”¨ã€‘: env.ts ã§é‡è¤‡ã—ã¦ã„ãŸå®Ÿè£…ã‚’å…±é€šåŒ–
 * ã€ä¸€è²«æ€§ç¢ºä¿ã€‘: ç’°å¢ƒå¤‰æ•°ã‚¨ãƒ©ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’çµ±ä¸€
 *
 * @param context - ã‚¨ãƒ©ãƒ¼ã®è©³ç´°æƒ…å ±ã¾ãŸã¯ã‚¨ãƒ©ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
 * @returns çµ±ä¸€ã•ã‚ŒãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ç’°å¢ƒå¤‰æ•°ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
 */
export const createEnvironmentErrorMessage = (context: unknown): string => {
  // ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ§‹æˆã€‘: çµ±ä¸€ã•ã‚ŒãŸãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ + ã‚¨ãƒ©ãƒ¼è©³ç´°
  const errorMessage = getErrorMessage(context);
  return `ç’°å¢ƒå¤‰æ•°è¨­å®šã‚¨ãƒ©ãƒ¼: ${errorMessage}`;
};
