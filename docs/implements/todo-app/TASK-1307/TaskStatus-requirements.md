# TDDè¦ä»¶å®šç¾©: TaskStatuså€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

## ğŸ“„ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæƒ…å ±

- **ä½œæˆæ—¥**: 2025-11-21
- **TASK-ID**: TASK-1307
- **è¦ä»¶å**: todo-app
- **æ©Ÿèƒ½å**: TaskStatuså€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
- **TDDãƒ•ã‚§ãƒ¼ã‚º**: è¦ä»¶å®šç¾©
- **æ¨å®šå·¥æ•°**: 8æ™‚é–“

## 1. æ©Ÿèƒ½ã®æ¦‚è¦ï¼ˆEARSè¦ä»¶å®šç¾©æ›¸ãƒ»è¨­è¨ˆæ–‡æ›¸ãƒ™ãƒ¼ã‚¹ï¼‰

### ä½•ã‚’ã™ã‚‹æ©Ÿèƒ½ã‹

ğŸ”µ **é’ä¿¡å·**: EARSè¦ä»¶å®šç¾©æ›¸ãƒ»è¨­è¨ˆæ–‡æ›¸ã‹ã‚‰ç¢ºå®Ÿ

- ã‚¿ã‚¹ã‚¯ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆæœªç€æ‰‹ã€é€²è¡Œä¸­ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ã€å®Œäº†ï¼‰ã‚’è¡¨ç¾ã™ã‚‹å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
- DDDåŸå‰‡ã«å¾“ã„ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨ã„ã†æ¦‚å¿µã‚’ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªå€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ã‚«ãƒ—ã‚»ãƒ«åŒ–ã™ã‚‹
- ä¸æ­£ãªå€¤ã‚’å—ã‘ä»˜ã‘ãšã€å‹å®‰å…¨ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†ã‚’å®Ÿç¾ã™ã‚‹

**å‚ç…§ã—ãŸEARSè¦ä»¶**:
- REQ-004: ã‚·ã‚¹ãƒ†ãƒ ã¯ã‚¿ã‚¹ã‚¯ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹(æœªç€æ‰‹ãƒ»é€²è¡Œä¸­ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ãƒ»å®Œäº†)ã‚’å¤‰æ›´ã§ããªã‘ã‚Œã°ãªã‚‰ãªã„
- REQ-104: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¿ã‚¹ã‚¯ã‚’ä½œæˆã™ã‚‹å ´åˆã€ã‚·ã‚¹ãƒ†ãƒ ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ã€Œæœªç€æ‰‹ã€ã«è¨­å®šã—ãªã‘ã‚Œã°ãªã‚‰ãªã„

**å‚ç…§ã—ãŸè¨­è¨ˆæ–‡æ›¸**:
- [interfaces.ts](../../design/todo-app/interfaces.ts) - `TaskStatus`å‹å®šç¾©ï¼ˆline 29-36ï¼‰
- [architecture.md](../../design/todo-app/architecture.md) - Domainå±¤ã®å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆline 178ï¼‰

### ã©ã®ã‚ˆã†ãªå•é¡Œã‚’è§£æ±ºã™ã‚‹ã‹

ğŸ”µ **é’ä¿¡å·**: EARSè¦ä»¶å®šç¾©æ›¸ã‹ã‚‰ç¢ºå®Ÿ

- **å‹å®‰å…¨æ€§**: æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã«ã‚ˆã‚‹ã‚¿ã‚¤ãƒã‚„ä¸æ­£ãªå€¤ã®æ··å…¥ã‚’é˜²ã
- **ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã®ã‚«ãƒ—ã‚»ãƒ«åŒ–**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã‚’å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«é›†ç´„
- **ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®å€¤ãŒä¸æ­£ã«å¤‰æ›´ã•ã‚Œã‚‹ã“ã¨ã‚’é˜²ã
- **å°†æ¥çš„ãªæ‹¡å¼µæ€§**: ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¸ã®æ‹¡å¼µã‚’è€ƒæ…®ã—ãŸè¨­è¨ˆ

**å‚ç…§ã—ãŸEARSè¦ä»¶**:
- NFR-303: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè‡ªç”±ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹æ§‹é€ ã¸ã®æ‹¡å¼µå¯èƒ½æ€§ã‚’æ®‹ã™
- REQ-401: ã‚·ã‚¹ãƒ†ãƒ ã¯DDD + ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„

### æƒ³å®šã•ã‚Œã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼

ğŸ”µ **é’ä¿¡å·**: EARSè¦ä»¶å®šç¾©æ›¸ã‹ã‚‰ç¢ºå®Ÿ

- **ç›´æ¥åˆ©ç”¨è€…**: TaskEntityã‚¯ãƒ©ã‚¹ï¼ˆDomainå±¤ï¼‰
- **é–“æ¥åˆ©ç”¨è€…**: Applicationå±¤ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼ˆCreateTaskUseCaseã€UpdateTaskUseCaseç­‰ï¼‰
- **æœ€çµ‚åˆ©ç”¨è€…**: ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚’è¡Œã†ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼

### ã‚·ã‚¹ãƒ†ãƒ å†…ã§ã®ä½ç½®ã¥ã‘

ğŸ”µ **é’ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã‹ã‚‰ç¢ºå®Ÿ

- **Domainå±¤**: `app/server/src/domain/task/valueobjects/TaskStatus.ts`
- **å½¹å‰²**: TaskEntityã®æ§‹æˆè¦ç´ ã¨ã—ã¦ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨ã„ã†æ¦‚å¿µã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–
- **ä¾å­˜é–¢ä¿‚**: å¤–éƒ¨ã«ä¾å­˜ã—ãªã„ï¼ˆPure TypeScriptï¼‰

**å‚ç…§ã—ãŸè¨­è¨ˆæ–‡æ›¸**:
- [architecture.md](../../design/todo-app/architecture.md) - Domainå±¤ã®æ§‹é€ ï¼ˆline 168-180ï¼‰

## 2. å…¥åŠ›ãƒ»å‡ºåŠ›ã®ä»•æ§˜ï¼ˆEARSæ©Ÿèƒ½è¦ä»¶ãƒ»TypeScriptå‹å®šç¾©ãƒ™ãƒ¼ã‚¹ï¼‰

### å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

ğŸ”µ **é’ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã‹ã‚‰ç¢ºå®Ÿ

**ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¡ã‚½ãƒƒãƒ‰ `create(value: unknown)`**:
- **å‹**: `unknown`ï¼ˆå®Ÿè¡Œæ™‚ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- **ç¯„å›²**: `'not_started' | 'in_progress' | 'in_review' | 'completed'`
- **åˆ¶ç´„**:
  - æ–‡å­—åˆ—å‹ã§ã‚ã‚‹ã“ã¨
  - è¨±å®¹å€¤ãƒªã‚¹ãƒˆã«å«ã¾ã‚Œã‚‹ã“ã¨
  - `null`ã€`undefined`ã€ç©ºæ–‡å­—åˆ—ã¯ä¸å¯

**å‚ç…§ã—ãŸEARSè¦ä»¶**: REQ-004
**å‚ç…§ã—ãŸè¨­è¨ˆæ–‡æ›¸**: [interfaces.ts line 29-36](../../design/todo-app/interfaces.ts)

### å‡ºåŠ›å€¤

ğŸ”µ **é’ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã‹ã‚‰ç¢ºå®Ÿ

**`getValue()` ãƒ¡ã‚½ãƒƒãƒ‰**:
- **å‹**: `TaskStatusValue`ï¼ˆ`'not_started' | 'in_progress' | 'in_review' | 'completed'`ï¼‰
- **å½¢å¼**: æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«
- **ä¾‹**:
  - `'not_started'` - æœªç€æ‰‹
  - `'in_progress'` - é€²è¡Œä¸­
  - `'in_review'` - ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­
  - `'completed'` - å®Œäº†

**`equals(other: TaskStatus)` ãƒ¡ã‚½ãƒƒãƒ‰**:
- **å‹**: `boolean`
- **å½¢å¼**: çœŸå½å€¤
- **ä¾‹**: `status1.equals(status2) // true or false`

**`isCompleted()` ãƒ¡ã‚½ãƒƒãƒ‰**:
- **å‹**: `boolean`
- **å½¢å¼**: çœŸå½å€¤
- **ä¾‹**: `status.isCompleted() // trueï¼ˆå®Œäº†çŠ¶æ…‹ã®å ´åˆï¼‰`

**å‚ç…§ã—ãŸè¨­è¨ˆæ–‡æ›¸**: [interfaces.ts line 29-36](../../design/todo-app/interfaces.ts)

### å…¥å‡ºåŠ›ã®é–¢ä¿‚æ€§

ğŸ”µ **é’ä¿¡å·**: TaskPriorityã®å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰ç¢ºå®Ÿ

```typescript
// æ­£å¸¸ç³»
const status = TaskStatus.create('in_progress');
status.getValue(); // 'in_progress'
status.isCompleted(); // false

// ç•°å¸¸ç³»
TaskStatus.create('invalid'); // Error: ä¸æ­£ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ã™: invalid
TaskStatus.create(null); // Error: ä¸æ­£ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ã™: null
TaskStatus.create(''); // Error: ä¸æ­£ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ã™:
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

ğŸ”µ **é’ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã‹ã‚‰ç¢ºå®Ÿ

```mermaid
flowchart LR
    A["å¤–éƒ¨å…¥åŠ›<br/>(unknownå‹)"] --> B["TaskStatus.create()"]
    B --> C["ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³<br/>(isValid)"]
    C -->|"æœ‰åŠ¹"| D["TaskStatusã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆ"]
    C -->|"ç„¡åŠ¹"| E["Error<br/>(ä¸æ­£ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹)"]
    D --> F["getValue()<br/>(TaskStatusValue)"]
```

**å‚ç…§ã—ãŸè¨­è¨ˆæ–‡æ›¸**: [dataflow.md](../../design/todo-app/dataflow.md)

## 3. åˆ¶ç´„æ¡ä»¶ï¼ˆEARSéæ©Ÿèƒ½è¦ä»¶ãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆãƒ™ãƒ¼ã‚¹ï¼‰

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

ğŸŸ¡ **é»„ä¿¡å·**: å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸€èˆ¬çš„ãªæ€§è³ªã‹ã‚‰æ¨æ¸¬

- å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿæˆã¯é«˜é€Ÿã§ã‚ã‚‹ã“ã¨ï¼ˆãƒŠãƒç§’ã‚ªãƒ¼ãƒ€ãƒ¼ï¼‰
- ãƒ¡ãƒ¢ãƒªåŠ¹ç‡çš„ã§ã‚ã‚‹ã“ã¨ï¼ˆimmutableãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åˆ¶ç´„

ğŸ”µ **é’ä¿¡å·**: è¨­è¨ˆæ–‡æ›¸ã‹ã‚‰ç¢ºå®Ÿ

- **DDDåŸå‰‡ã®éµå®ˆ**: å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ã§ã‚ã‚‹ã“ã¨
- **å˜ä¸€è²¬ä»»ã®åŸå‰‡**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®è¡¨ç¾ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿ã«è²¬å‹™ã‚’é™å®š
- **ä¾å­˜é–¢ä¿‚**: å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜ã—ãªã„ï¼ˆPure TypeScriptï¼‰

**å‚ç…§ã—ãŸEARSè¦ä»¶**: REQ-401
**å‚ç…§ã—ãŸè¨­è¨ˆæ–‡æ›¸**: [architecture.md line 168-180](../../design/todo-app/architecture.md)

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆ¶ç´„

ğŸ”µ **é’ä¿¡å·**: è¦ä»¶å®šç¾©æ›¸ã‹ã‚‰ç¢ºå®Ÿ

```sql
-- CHECKåˆ¶ç´„ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å±¤ï¼‰
CHECK (status IN ('not_started', 'in_progress', 'in_review', 'completed'))
```

**å‚ç…§ã—ãŸEARSè¦ä»¶**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ï¼ˆline 150-186ï¼‰

### ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£åˆ¶ç´„

ğŸ”µ **é’ä¿¡å·**: DDDåŸå‰‡ã‹ã‚‰ç¢ºå®Ÿ

- å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ç”Ÿæˆå¾Œã«å€¤ã‚’å¤‰æ›´ã§ããªã„
- `private readonly value` ã«ã‚ˆã£ã¦ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£ã‚’ä¿è¨¼
- ç­‰ä¾¡æ€§æ¯”è¼ƒã¯å€¤ã®ä¸€è‡´ã§åˆ¤å®šï¼ˆæ¦‚å¿µçš„ãªåŒä¸€æ€§ã§ã¯ãªã„ï¼‰

## 4. æƒ³å®šã•ã‚Œã‚‹ä½¿ç”¨ä¾‹ï¼ˆEARSEdgeã‚±ãƒ¼ã‚¹ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ãƒ™ãƒ¼ã‚¹ï¼‰

### åŸºæœ¬çš„ãªä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³

ğŸ”µ **é’ä¿¡å·**: EARSè¦ä»¶å®šç¾©æ›¸ã‹ã‚‰ç¢ºå®Ÿ

**æ­£å¸¸ç³» - æœªç€æ‰‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ç”Ÿæˆ**:
```typescript
const status = TaskStatus.create('not_started');
console.log(status.getValue()); // 'not_started'
console.log(status.isCompleted()); // false
```

**æ­£å¸¸ç³» - é€²è¡Œä¸­ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ç”Ÿæˆ**:
```typescript
const status = TaskStatus.create('in_progress');
console.log(status.getValue()); // 'in_progress'
console.log(status.isCompleted()); // false
```

**æ­£å¸¸ç³» - ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ç”Ÿæˆ**:
```typescript
const status = TaskStatus.create('in_review');
console.log(status.getValue()); // 'in_review'
console.log(status.isCompleted()); // false
```

**æ­£å¸¸ç³» - å®Œäº†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ç”Ÿæˆ**:
```typescript
const status = TaskStatus.create('completed');
console.log(status.getValue()); // 'completed'
console.log(status.isCompleted()); // true
```

**æ­£å¸¸ç³» - ç­‰ä¾¡æ€§æ¯”è¼ƒ**:
```typescript
const status1 = TaskStatus.create('in_progress');
const status2 = TaskStatus.create('in_progress');
const status3 = TaskStatus.create('completed');

console.log(status1.equals(status2)); // true
console.log(status1.equals(status3)); // false
```

**å‚ç…§ã—ãŸEARSè¦ä»¶**: REQ-004

### ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹

ğŸŸ¡ **é»„ä¿¡å·**: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¦ä»¶ã‹ã‚‰æ¨æ¸¬

**ç•°å¸¸ç³» - ä¸æ­£ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å€¤**:
```typescript
try {
  TaskStatus.create('invalid_status');
} catch (error) {
  console.error(error.message);
  // 'notæ­£ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ã™: invalid_status (è¨±å®¹å€¤: not_started, in_progress, in_review, completed)'
}
```

**ç•°å¸¸ç³» - ç©ºæ–‡å­—åˆ—**:
```typescript
try {
  TaskStatus.create('');
} catch (error) {
  console.error(error.message);
  // 'ä¸æ­£ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ã™:  (è¨±å®¹å€¤: not_started, in_progress, in_review, completed)'
}
```

**ç•°å¸¸ç³» - null**:
```typescript
try {
  TaskStatus.create(null);
} catch (error) {
  console.error(error.message);
  // 'ä¸æ­£ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ã™: null (è¨±å®¹å€¤: not_started, in_progress, in_review, completed)'
}
```

**ç•°å¸¸ç³» - undefined**:
```typescript
try {
  TaskStatus.create(undefined);
} catch (error) {
  console.error(error.message);
  // 'ä¸æ­£ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ã™: undefined (è¨±å®¹å€¤: not_started, in_progress, in_review, completed)'
}
```

**å‚ç…§ã—ãŸEARSè¦ä»¶**: EDGE-001ï¼ˆé¡ä¼¼ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ï¼‰

### ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹

ğŸ”µ **é’ä¿¡å·**: EARSè¦ä»¶å®šç¾©æ›¸ã‹ã‚‰ç¢ºå®Ÿ

```typescript
// TaskEntityã§ã®ä½¿ç”¨ä¾‹
class TaskEntity {
  private status: TaskStatus;

  public changeStatus(newStatus: string): void {
    try {
      this.status = TaskStatus.create(newStatus);
      this.touch(); // updatedAtã‚’æ›´æ–°
    } catch (error) {
      throw new InvalidTaskDataError(error.message);
    }
  }
}
```

**å‚ç…§ã—ãŸEARSè¦ä»¶**: REQ-004

## 5. EARSè¦ä»¶ãƒ»è¨­è¨ˆæ–‡æ›¸ã¨ã®å¯¾å¿œé–¢ä¿‚

### å‚ç…§ã—ãŸãƒ¦ãƒ¼ã‚¶ã‚¹ãƒˆãƒ¼ãƒªãƒ¼

ğŸ”µ **é’ä¿¡å·**

- **US-002**: ã‚¿ã‚¹ã‚¯ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†
  - ã€Œç§ã¯ã‚¿ã‚¹ã‚¯ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç®¡ç†ã—ãŸã„ã€‚ãªãœãªã‚‰é€²æ—çŠ¶æ³ã‚’å¯è¦–åŒ–ã—ãŸã„ã‹ã‚‰ã€‚ã€

### å‚ç…§ã—ãŸæ©Ÿèƒ½è¦ä»¶

ğŸ”µ **é’ä¿¡å·**

- **REQ-004**: ã‚·ã‚¹ãƒ†ãƒ ã¯ã‚¿ã‚¹ã‚¯ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹(æœªç€æ‰‹ãƒ»é€²è¡Œä¸­ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ãƒ»å®Œäº†)ã‚’å¤‰æ›´ã§ããªã‘ã‚Œã°ãªã‚‰ãªã„
- **REQ-104**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¿ã‚¹ã‚¯ã‚’ä½œæˆã™ã‚‹å ´åˆã€ã‚·ã‚¹ãƒ†ãƒ ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ã€Œæœªç€æ‰‹ã€ã«è¨­å®šã—ãªã‘ã‚Œã°ãªã‚‰ãªã„
- **REQ-401**: ã‚·ã‚¹ãƒ†ãƒ ã¯DDD + ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„

### å‚ç…§ã—ãŸéæ©Ÿèƒ½è¦ä»¶

ğŸ”µ **é’ä¿¡å·**

- **NFR-303**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè‡ªç”±ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹æ§‹é€ ã¸ã®æ‹¡å¼µå¯èƒ½æ€§ã‚’æ®‹ã™
- **NFR-304**: å„å±¤ã®è²¬å‹™ãŒæ˜ç¢ºã«åˆ†é›¢ã•ã‚Œã€ç‹¬ç«‹ã—ã¦ãƒ†ã‚¹ãƒˆå¯èƒ½ã§ã‚ã‚‹ã“ã¨

### å‚ç…§ã—ãŸEdgeã‚±ãƒ¼ã‚¹

ğŸŸ¡ **é»„ä¿¡å·**: é¡ä¼¼ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã‹ã‚‰æ¨æ¸¬

- **EDGE-001**: ã‚¿ã‚¤ãƒˆãƒ«ãŒç©ºæ–‡å­—ã®å ´åˆã€ã‚·ã‚¹ãƒ†ãƒ ã¯ã€Œã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ï¼ˆé¡ä¼¼ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰

### å‚ç…§ã—ãŸè¨­è¨ˆæ–‡æ›¸

ğŸ”µ **é’ä¿¡å·**

- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: [architecture.md line 168-180](../../design/todo-app/architecture.md) - Domainå±¤ã®å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
- **ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**: [dataflow.md](../../design/todo-app/dataflow.md) - ã‚¿ã‚¹ã‚¯ä½œæˆãƒ•ãƒ­ãƒ¼
- **å‹å®šç¾©**: [interfaces.ts line 29-36](../../design/todo-app/interfaces.ts) - `TaskStatus`å‹å®šç¾©
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: [è¦ä»¶å®šç¾©æ›¸ line 136-188](../../spec/todo-app-requirements.md) - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒï¼ˆtasksãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰

## 6. å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆTaskPriorityã‹ã‚‰ã®å­¦ç¿’ï¼‰

ğŸ”µ **é’ä¿¡å·**: æ—¢å­˜å®Ÿè£…ã‹ã‚‰ç¢ºå®Ÿ

TaskPriorityã®å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å‚è€ƒã«ã€ä»¥ä¸‹ã®æ§‹é€ ã‚’è¸è¥²ã™ã‚‹:

```typescript
/**
 * è¨±å®¹ã•ã‚Œã‚‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å€¤ã®å®šæ•°é…åˆ—ï¼ˆSingle Source of Truthï¼‰
 */
const TASK_STATUS_VALUES = [
  'not_started',
  'in_progress',
  'in_review',
  'completed'
] as const;

/**
 * ã‚¿ã‚¹ã‚¯ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®å‹å®šç¾©
 */
export type TaskStatusValue = (typeof TASK_STATUS_VALUES)[number];

/**
 * TaskStatus å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
 */
export class TaskStatus {
  private readonly value: TaskStatusValue;

  private constructor(value: TaskStatusValue) {
    this.value = value;
  }

  public static create(value: unknown): TaskStatus {
    if (!TaskStatus.isValid(value)) {
      throw new Error(
        `ä¸æ­£ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ã™: ${value} (è¨±å®¹å€¤: ${TASK_STATUS_VALUES.join(', ')})`
      );
    }
    return new TaskStatus(value);
  }

  public getValue(): TaskStatusValue {
    return this.value;
  }

  public equals(other: TaskStatus): boolean {
    return this.value === other.value;
  }

  public isCompleted(): boolean {
    return this.value === 'completed';
  }

  private static isValid(value: unknown): value is TaskStatusValue {
    return (
      typeof value === 'string' &&
      (TASK_STATUS_VALUES as readonly string[]).includes(value)
    );
  }
}
```

## 7. å“è³ªåˆ¤å®š

### è¦ä»¶ã®æ˜ç¢ºã•

âœ… **é«˜å“è³ª**: æ›–æ˜§ã•ãªã—

- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ç¨®é¡ãŒæ˜ç¢ºï¼ˆ4ç¨®é¡ï¼‰
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«ãŒæ˜ç¢º
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒæ˜ç¢º

### å…¥å‡ºåŠ›å®šç¾©

âœ… **é«˜å“è³ª**: å®Œå…¨

- å…¥åŠ›: `unknown`å‹ï¼ˆå®Ÿè¡Œæ™‚ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- å‡ºåŠ›: `TaskStatusValue`å‹ï¼ˆå‹å®‰å…¨ï¼‰
- ã‚¨ãƒ©ãƒ¼: `Error`ï¼ˆä¸æ­£ãªå€¤ã®å ´åˆï¼‰

### åˆ¶ç´„æ¡ä»¶

âœ… **é«˜å“è³ª**: æ˜ç¢º

- ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£åˆ¶ç´„ãŒæ˜ç¢º
- DDDåŸå‰‡ã®éµå®ˆãŒæ˜ç¢º
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹CHECKåˆ¶ç´„ã¨ã®æ•´åˆæ€§ãŒæ˜ç¢º

### å®Ÿè£…å¯èƒ½æ€§

âœ… **é«˜å“è³ª**: ç¢ºå®Ÿ

- TaskPriorityã®å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¸è¥²å¯èƒ½
- æ—¢å­˜ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨æ•´åˆæ€§ã‚ã‚Š
- ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ãŒæ˜ç¢º

## 8. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

æ¬¡ã®ãŠå‹§ã‚ã‚¹ãƒ†ãƒƒãƒ—: `/tsumiki:tdd-testcases` ã§ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®æ´—ã„å‡ºã—ã‚’è¡Œã„ã¾ã™ã€‚

---

**ä½œæˆè€…**: Claude Code (TDD requirements agent)
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: æœªå®Ÿæ–½
**æ‰¿èª**: æœªå®Ÿæ–½
