# ⚠️ 警告: このファイルは自動生成されています
# このファイルを直接編集しないでください。
# 変更が必要な場合は、以下のいずれかを更新してから再生成してください:
#   - app/server/src/schemas/*.ts (DBスキーマ)
#   - app/packages/shared-schemas/src/*.ts (API契約スキーマ)
#   - app/server/src/presentation/http/routes/*.schema.ts (ルート定義)
# 再生成コマンド: docker compose exec server bun run generate:openapi

openapi: 3.1.0
info:
  title: hoxbl Spec
  version: 1.0.0
  description: |-
    型安全性強化・API契約強化プロジェクトによるAPI仕様

    Single Source of Truth: Drizzle ORM → Drizzle Zod → Zod → OpenAPI → TypeScript
servers:
  - url: /api
    description: API Server
components:
  schemas: {}
  parameters: {}
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT認証トークン
paths:
  /auth/callback:
    post:
      tags:
        - 認証
      summary: Supabase認証後のコールバック処理
      description: Supabase認証後のユーザー情報を受け取り、ユーザー作成または更新を行う
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                externalId:
                  type: string
                  minLength: 1
                provider:
                  type: string
                  enum:
                    - google
                    - apple
                    - microsoft
                    - github
                    - facebook
                    - line
                email:
                  type: string
                  format: email
                name:
                  type: string
                  minLength: 1
                avatarUrl:
                  type: string
                  nullable: true
                  format: uri
              required:
                - externalId
                - provider
                - email
                - name
      responses:
        '200':
          description: 認証成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                      externalId:
                        type: string
                      provider:
                        type: string
                        enum:
                          - google
                          - apple
                          - microsoft
                          - github
                          - facebook
                          - line
                      email:
                        type: string
                        format: email
                      name:
                        type: string
                      avatarUrl:
                        type: string
                        nullable: true
                        format: uri
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                      lastLoginAt:
                        type: string
                        nullable: true
                        format: date-time
                    required:
                      - id
                      - externalId
                      - provider
                      - email
                      - name
                      - createdAt
                      - updatedAt
                required:
                  - success
                  - data
        '400':
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '500':
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
  /users/{id}:
    get:
      tags:
        - ユーザー管理
      summary: ユーザー情報取得
      description: ユーザーIDでユーザー情報を取得する
      parameters:
        - schema:
            type: string
            format: uuid
          required: true
          name: id
          in: path
      responses:
        '200':
          description: ユーザー情報取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                      externalId:
                        type: string
                      provider:
                        type: string
                        enum:
                          - google
                          - apple
                          - microsoft
                          - github
                          - facebook
                          - line
                      email:
                        type: string
                        format: email
                      name:
                        type: string
                      avatarUrl:
                        type: string
                        nullable: true
                        format: uri
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                      lastLoginAt:
                        type: string
                        nullable: true
                        format: date-time
                    required:
                      - id
                      - externalId
                      - provider
                      - email
                      - name
                      - createdAt
                      - updatedAt
                required:
                  - success
                  - data
        '400':
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '401':
          description: JWKS検証失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '404':
          description: ユーザーが見つからない
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '500':
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
    put:
      tags:
        - ユーザー管理
      summary: ユーザー情報更新
      description: ユーザー情報を更新する（名前・アバターURL）
      parameters:
        - schema:
            type: string
            format: uuid
          required: true
          name: id
          in: path
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 1
                avatarUrl:
                  type: string
                  format: uri
      responses:
        '200':
          description: ユーザー情報更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                      externalId:
                        type: string
                      provider:
                        type: string
                        enum:
                          - google
                          - apple
                          - microsoft
                          - github
                          - facebook
                          - line
                      email:
                        type: string
                        format: email
                      name:
                        type: string
                      avatarUrl:
                        type: string
                        nullable: true
                        format: uri
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                      lastLoginAt:
                        type: string
                        nullable: true
                        format: date-time
                    required:
                      - id
                      - externalId
                      - provider
                      - email
                      - name
                      - createdAt
                      - updatedAt
                required:
                  - success
                  - data
        '400':
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '401':
          description: JWKS検証失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '404':
          description: ユーザーが見つからない
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '500':
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
  /users:
    get:
      tags:
        - ユーザー管理
      summary: ユーザー一覧取得
      description: ユーザー一覧を取得する（ページネーション・フィルタリング対応）
      parameters:
        - schema:
            type: string
            enum:
              - google
              - apple
              - microsoft
              - github
              - facebook
              - line
          required: false
          name: provider
          in: query
        - schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          required: false
          name: limit
          in: query
        - schema:
            type: integer
            nullable: true
            minimum: 0
            default: 0
          required: false
          name: offset
          in: query
      responses:
        '200':
          description: ユーザー一覧取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - true
                  data:
                    type: object
                    properties:
                      users:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              format: uuid
                            externalId:
                              type: string
                            provider:
                              type: string
                              enum:
                                - google
                                - apple
                                - microsoft
                                - github
                                - facebook
                                - line
                            email:
                              type: string
                              format: email
                            name:
                              type: string
                            avatarUrl:
                              type: string
                              nullable: true
                              format: uri
                            createdAt:
                              type: string
                              format: date-time
                            updatedAt:
                              type: string
                              format: date-time
                            lastLoginAt:
                              type: string
                              nullable: true
                              format: date-time
                          required:
                            - id
                            - externalId
                            - provider
                            - email
                            - name
                            - createdAt
                            - updatedAt
                      total:
                        type: integer
                        minimum: 0
                      limit:
                        type: integer
                        minimum: 1
                        maximum: 100
                      offset:
                        type: integer
                        minimum: 0
                    required:
                      - users
                      - total
                      - limit
                      - offset
                required:
                  - success
                  - data
        '400':
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '401':
          description: JWKS検証失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '500':
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
  /user/profile:
    get:
      tags:
        - 認証ユーザー
      summary: 認証ユーザープロフィール取得
      description: JWT認証済みユーザーの自身のプロフィール情報を取得する
      security:
        - BearerAuth: []
      responses:
        '200':
          description: プロフィール取得成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                      externalId:
                        type: string
                      provider:
                        type: string
                        enum:
                          - google
                          - apple
                          - microsoft
                          - github
                          - facebook
                          - line
                      email:
                        type: string
                        format: email
                      name:
                        type: string
                      avatarUrl:
                        type: string
                        nullable: true
                        format: uri
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                      lastLoginAt:
                        type: string
                        nullable: true
                        format: date-time
                    required:
                      - id
                      - externalId
                      - provider
                      - email
                      - name
                      - createdAt
                      - updatedAt
                required:
                  - success
                  - data
        '400':
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '401':
          description: JWT認証失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '404':
          description: ユーザーが見つからない
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '500':
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
  /tasks:
    get:
      tags:
        - タスク管理
      summary: タスク一覧取得
      description: ログインユーザーのタスク一覧を取得します。フィルタとソートに対応しています。
      security:
        - BearerAuth: []
      parameters:
        - schema:
            type: string
            enum:
              - high
              - medium
              - low
            description: タスクの優先度
            example: high
          required: false
          description: タスクの優先度
          name: priority
          in: query
        - schema:
            type: string
            description: ステータス（カンマ区切りで複数選択可能）
            example: in_progress,in_review
          required: false
          description: ステータス（カンマ区切りで複数選択可能）
          name: status
          in: query
        - schema:
            type: string
            enum:
              - created_at_desc
              - created_at_asc
              - priority_desc
            default: created_at_desc
            description: タスクのソート順
            example: priority_desc
          required: false
          description: タスクのソート順
          name: sort
          in: query
      responses:
        '200':
          description: タスク一覧を取得しました
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                        userId:
                          type: string
                          format: uuid
                        title:
                          type: string
                          minLength: 1
                          maxLength: 100
                        description:
                          type: string
                          nullable: true
                        priority:
                          type: string
                          enum:
                            - high
                            - medium
                            - low
                        status:
                          type: string
                          enum:
                            - not_started
                            - in_progress
                            - in_review
                            - completed
                        createdAt:
                          type: string
                          format: date-time
                        updatedAt:
                          type: string
                          format: date-time
                      required:
                        - id
                        - userId
                        - title
                        - description
                        - priority
                        - status
                        - createdAt
                        - updatedAt
                required:
                  - success
                  - data
        '400':
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '401':
          description: JWT認証失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '500':
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
    post:
      tags:
        - タスク管理
      summary: タスク作成
      description: 新しいタスクを作成します。
      security:
        - BearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  minLength: 1
                  maxLength: 100
                description:
                  type: string
                priority:
                  type: string
                  enum:
                    - high
                    - medium
                    - low
                  default: medium
              required:
                - title
      responses:
        '201':
          description: タスクを作成しました
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                      userId:
                        type: string
                        format: uuid
                      title:
                        type: string
                        minLength: 1
                        maxLength: 100
                      description:
                        type: string
                        nullable: true
                      priority:
                        type: string
                        enum:
                          - high
                          - medium
                          - low
                      status:
                        type: string
                        enum:
                          - not_started
                          - in_progress
                          - in_review
                          - completed
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                    required:
                      - id
                      - userId
                      - title
                      - description
                      - priority
                      - status
                      - createdAt
                      - updatedAt
                required:
                  - success
                  - data
        '400':
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '401':
          description: JWT認証失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '500':
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
  /tasks/{id}:
    get:
      tags:
        - タスク管理
      summary: タスク詳細取得
      description: タスクIDでタスク詳細を取得します。
      security:
        - BearerAuth: []
      parameters:
        - schema:
            type: string
            format: uuid
            example: 550e8400-e29b-41d4-a716-446655440000
          required: true
          name: id
          in: path
      responses:
        '200':
          description: タスク詳細を取得しました
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                      userId:
                        type: string
                        format: uuid
                      title:
                        type: string
                        minLength: 1
                        maxLength: 100
                      description:
                        type: string
                        nullable: true
                      priority:
                        type: string
                        enum:
                          - high
                          - medium
                          - low
                      status:
                        type: string
                        enum:
                          - not_started
                          - in_progress
                          - in_review
                          - completed
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                    required:
                      - id
                      - userId
                      - title
                      - description
                      - priority
                      - status
                      - createdAt
                      - updatedAt
                required:
                  - success
                  - data
        '401':
          description: JWT認証失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '403':
          description: 他ユーザーのタスクにアクセスしようとしました
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '404':
          description: タスクが見つかりません
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '500':
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
    put:
      tags:
        - タスク管理
      summary: タスク更新
      description: タスクの情報を更新します（部分更新）。
      security:
        - BearerAuth: []
      parameters:
        - schema:
            type: string
            format: uuid
            example: 550e8400-e29b-41d4-a716-446655440000
          required: true
          name: id
          in: path
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  minLength: 1
                  maxLength: 100
                description:
                  type: string
                  nullable: true
                priority:
                  type: string
                  enum:
                    - high
                    - medium
                    - low
      responses:
        '200':
          description: タスクを更新しました
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                      userId:
                        type: string
                        format: uuid
                      title:
                        type: string
                        minLength: 1
                        maxLength: 100
                      description:
                        type: string
                        nullable: true
                      priority:
                        type: string
                        enum:
                          - high
                          - medium
                          - low
                      status:
                        type: string
                        enum:
                          - not_started
                          - in_progress
                          - in_review
                          - completed
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                    required:
                      - id
                      - userId
                      - title
                      - description
                      - priority
                      - status
                      - createdAt
                      - updatedAt
                required:
                  - success
                  - data
        '400':
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '401':
          description: JWT認証失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '404':
          description: タスクが見つかりません
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '500':
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
    delete:
      tags:
        - タスク管理
      summary: タスク削除
      description: タスクを削除します（物理削除）。
      security:
        - BearerAuth: []
      parameters:
        - schema:
            type: string
            format: uuid
            example: 550e8400-e29b-41d4-a716-446655440000
          required: true
          name: id
          in: path
      responses:
        '204':
          description: タスクを削除しました
        '401':
          description: JWT認証失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '403':
          description: 他ユーザーのタスクを削除しようとしました
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '404':
          description: タスクが見つかりません
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '500':
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
  /tasks/{id}/status:
    patch:
      tags:
        - タスク管理
      summary: タスクステータス変更
      description: タスクのステータスを変更します。
      security:
        - BearerAuth: []
      parameters:
        - schema:
            type: string
            format: uuid
            example: 550e8400-e29b-41d4-a716-446655440000
          required: true
          name: id
          in: path
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  enum:
                    - not_started
                    - in_progress
                    - in_review
                    - completed
              required:
                - status
      responses:
        '200':
          description: タスクステータスを変更しました
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid
                      userId:
                        type: string
                        format: uuid
                      title:
                        type: string
                        minLength: 1
                        maxLength: 100
                      description:
                        type: string
                        nullable: true
                      priority:
                        type: string
                        enum:
                          - high
                          - medium
                          - low
                      status:
                        type: string
                        enum:
                          - not_started
                          - in_progress
                          - in_review
                          - completed
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                    required:
                      - id
                      - userId
                      - title
                      - description
                      - priority
                      - status
                      - createdAt
                      - updatedAt
                required:
                  - success
                  - data
        '400':
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '401':
          description: JWT認証失敗
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '404':
          description: タスクが見つかりません
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
        '500':
          description: サーバーエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    enum:
                      - false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                      message:
                        type: string
                      details:
                        anyOf:
                          - type: object
                            additionalProperties:
                              type: string
                          - type: string
                    required:
                      - code
                      - message
                required:
                  - success
                  - error
